@page "/dashboard"
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization
@attribute [Authorize]

<PageTitle>Dashboard - SMU</PageTitle>

<AuthorizeView>
    <Authorized Context="authContext">
        @{
            var role = authContext.User.FindFirst("Role")?.Value ?? "Student";
            var fullName = authContext.User.FindFirst("FullName")?.Value ?? authContext.User.Identity?.Name ?? "Utilizator";
        }

        @switch (role)
        {
            case "Student":
                <SMU.Components.Pages.Dashboards.StudentDashboard UserName="@fullName" />
                break;
            case "Professor":
                <SMU.Components.Pages.Dashboards.ProfessorDashboard UserName="@fullName" />
                break;
            case "Secretary":
                <SMU.Components.Pages.Dashboards.SecretaryDashboard UserName="@fullName" />
                break;
            case "Dean":
                <SMU.Components.Pages.Dashboards.DeanDashboard UserName="@fullName" />
                break;
            case "Rector":
                <SMU.Components.Pages.Dashboards.RectorDashboard UserName="@fullName" />
                break;
            case "Admin":
                <SMU.Components.Pages.Dashboards.AdminDashboard UserName="@fullName" />
                break;
            default:
                <SMU.Components.Pages.Dashboards.StudentDashboard UserName="@fullName" />
                break;
        }
    </Authorized>
</AuthorizeView>
