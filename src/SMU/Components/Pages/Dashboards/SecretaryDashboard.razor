@using SMU.Components.Shared

<div class="space-y-6">
    <!-- Welcome Header -->
    <div class="bg-gradient-to-r from-info-600 to-info-700 rounded-xl p-6 text-white">
        <h1 class="text-2xl font-bold">Buna ziua, @UserName!</h1>
        <p class="mt-1 text-info-100">Iata un sumar al activitatii secretariatului.</p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <StatsCard
            Label="Studenti Activi"
            Value="@ActiveStudents.ToString()"
            Subtitle="in facultate"
            IconType="users"
            IconBgClass="bg-primary-100"
            IconClass="text-primary-600"
            ActionLink="/studenti"
            ActionText="Vezi studenti" />

        <StatsCard
            Label="Cereri Pending"
            Value="@PendingRequests.ToString()"
            Subtitle="@(PendingRequests > 0 ? "necesita procesare" : "nicio cerere")"
            IconType="document"
            IconBgClass="@(PendingRequests > 0 ? "bg-warning-100" : "bg-success-100")"
            IconClass="@(PendingRequests > 0 ? "text-warning-600" : "text-success-600")"
            ActionLink="/cereri"
            ActionText="Proceseaza cereri" />

        <StatsCard
            Label="Documente Emise"
            Value="@DocumentsIssuedThisMonth.ToString()"
            Subtitle="luna aceasta"
            IconType="document"
            IconBgClass="bg-info-100"
            IconClass="text-info-600"
            ShowTrend="true"
            TrendValue="@DocumentsTrend" />

        <StatsCard
            Label="Studenti Noi"
            Value="@NewStudentsThisMonth.ToString()"
            Subtitle="inregistrati luna aceasta"
            IconType="users"
            IconBgClass="bg-success-100"
            IconClass="text-success-600" />
    </div>

    <!-- Content Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Pending Requests -->
        <div class="lg:col-span-2">
            <RecentActivityList
                Title="Cereri de Procesat"
                Items="@PendingRequestsList"
                ViewAllLink="/cereri"
                EmptyMessage="Nu exista cereri in asteptare." />
        </div>

        <!-- Quick Actions -->
        <div class="space-y-6">
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Actiuni Rapide</h3>
                <div class="space-y-3">
                    <QuickActionButton
                        Text="Adauga Student"
                        IconType="plus"
                        Variant="primary"
                        FullWidth="true"
                        IsLink="true"
                        Link="/studenti/nou" />
                    <QuickActionButton
                        Text="Proceseaza Cereri"
                        IconType="check"
                        Variant="outline-primary"
                        FullWidth="true"
                        IsLink="true"
                        Link="/cereri" />
                    <QuickActionButton
                        Text="Emite Document"
                        IconType="document"
                        Variant="outline"
                        FullWidth="true"
                        IsLink="true"
                        Link="/documente/emite" />
                    <QuickActionButton
                        Text="Transfer Student"
                        IconType="arrow-right"
                        Variant="outline"
                        FullWidth="true"
                        IsLink="true"
                        Link="/studenti/transfer" />
                </div>
            </div>

            <!-- Statistics Summary -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-900">Statistici Facultate</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Programe de studiu</span>
                        <span class="font-semibold text-gray-900">@StudyPrograms</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Grupe active</span>
                        <span class="font-semibold text-gray-900">@ActiveGroups</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Profesori</span>
                        <span class="font-semibold text-gray-900">@TotalProfessors</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Rata promovare</span>
                        <span class="font-semibold text-success-600">@PassRate%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <RecentActivityList
            Title="Studenti Recent Adaugati"
            Items="@RecentStudents"
            MaxItems="5"
            EmptyMessage="Nu au fost adaugati studenti recent." />

        <RecentActivityList
            Title="Documente Emise Recent"
            Items="@RecentDocuments"
            MaxItems="5"
            EmptyMessage="Nu au fost emise documente recent." />
    </div>
</div>

@code {
    [Parameter] public string UserName { get; set; } = "Secretar";

    // Stats
    private int ActiveStudents = 485;
    private int PendingRequests = 7;
    private int DocumentsIssuedThisMonth = 34;
    private decimal DocumentsTrend = 12.5m;
    private int NewStudentsThisMonth = 15;
    private int StudyPrograms = 4;
    private int ActiveGroups = 18;
    private int TotalProfessors = 32;
    private decimal PassRate = 87.5m;

    // Data
    private List<RecentActivityList.ActivityItem> PendingRequestsList = new();
    private List<RecentActivityList.ActivityItem> RecentStudents = new();
    private List<RecentActivityList.ActivityItem> RecentDocuments = new();

    protected override void OnInitialized()
    {
        LoadDashboardData();
    }

    private void LoadDashboardData()
    {
        // Demo pending requests
        PendingRequestsList = new List<RecentActivityList.ActivityItem>
        {
            new() {
                Title = "Adeverinta de student",
                Description = "Popescu Maria - Anul 2",
                Timestamp = DateTime.Now.AddHours(-2),
                Type = "document",
                Badge = "Nou",
                BadgeType = "warning",
                ActionLink = "/cereri/1"
            },
            new() {
                Title = "Situatie scolara",
                Description = "Ionescu Andrei - Anul 3",
                Timestamp = DateTime.Now.AddHours(-5),
                Type = "document",
                Badge = "Nou",
                BadgeType = "warning",
                ActionLink = "/cereri/2"
            },
            new() {
                Title = "Transfer grupa",
                Description = "Popa Elena - 301A -> 301B",
                Timestamp = DateTime.Now.AddDays(-1),
                Type = "user",
                Badge = "In asteptare",
                BadgeType = "info",
                ActionLink = "/cereri/3"
            },
            new() {
                Title = "Adeverinta pentru bursa",
                Description = "Munteanu Dan - Anul 1",
                Timestamp = DateTime.Now.AddDays(-1),
                Type = "document",
                ActionLink = "/cereri/4"
            }
        };

        // Demo recent students
        RecentStudents = new List<RecentActivityList.ActivityItem>
        {
            new() {
                Title = "Georgescu Ana",
                Description = "Informatica - Anul 1, Gr. 101",
                Timestamp = DateTime.Now.AddDays(-1),
                Type = "user"
            },
            new() {
                Title = "Vasilescu Mihai",
                Description = "CTI - Anul 1, Gr. 102",
                Timestamp = DateTime.Now.AddDays(-2),
                Type = "user"
            },
            new() {
                Title = "Constantinescu Ioana",
                Description = "Informatica - Anul 1, Gr. 101",
                Timestamp = DateTime.Now.AddDays(-3),
                Type = "user"
            }
        };

        // Demo recent documents
        RecentDocuments = new List<RecentActivityList.ActivityItem>
        {
            new() {
                Title = "Adeverinta #2024-145",
                Description = "Popescu Ion - Student activ",
                Timestamp = DateTime.Now.AddHours(-3),
                Type = "document",
                Badge = "PDF",
                BadgeType = "success"
            },
            new() {
                Title = "Situatie scolara #2024-144",
                Description = "Marinescu Dana - Foaie matricola",
                Timestamp = DateTime.Now.AddDays(-1),
                Type = "document",
                Badge = "PDF",
                BadgeType = "success"
            },
            new() {
                Title = "Adeverinta #2024-143",
                Description = "Stan Alexandru - Pentru angajator",
                Timestamp = DateTime.Now.AddDays(-2),
                Type = "document",
                Badge = "PDF",
                BadgeType = "success"
            }
        };
    }
}
