@* QuickActionButton.razor - Reusable quick action button for dashboards *@

@if (IsLink)
{
    <a href="@Link" class="@GetButtonClass()">
        @if (IconContent != null)
        {
            @IconContent
        }
        else
        {
            <svg class="@GetIconSizeClass()" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                @((MarkupString)GetIconPath())
            </svg>
        }
        <span>@Text</span>
    </a>
}
else
{
    <button @onclick="OnClick" class="@GetButtonClass()" disabled="@Disabled">
        @if (IsLoading)
        {
            <svg class="@GetIconSizeClass() animate-spin" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        }
        else if (IconContent != null)
        {
            @IconContent
        }
        else
        {
            <svg class="@GetIconSizeClass()" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                @((MarkupString)GetIconPath())
            </svg>
        }
        <span>@Text</span>
    </button>
}

@code {
    [Parameter] public string Text { get; set; } = "Actiune";
    [Parameter] public string IconType { get; set; } = "plus"; // plus, edit, delete, view, download, upload, check, close
    [Parameter] public string Variant { get; set; } = "primary"; // primary, secondary, success, warning, danger, outline
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg
    [Parameter] public bool FullWidth { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public bool IsLink { get; set; }
    [Parameter] public string? Link { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }
    [Parameter] public RenderFragment? IconContent { get; set; }

    private string GetButtonClass()
    {
        var baseClass = "inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2";

        var sizeClass = Size switch
        {
            "sm" => "px-3 py-1.5 text-sm gap-1.5",
            "lg" => "px-6 py-3 text-lg gap-3",
            _ => "px-4 py-2 text-base gap-2"
        };

        var variantClass = Variant switch
        {
            "secondary" => "bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500",
            "success" => "bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",
            "warning" => "bg-warning-500 text-white hover:bg-warning-600 focus:ring-warning-500",
            "danger" => "bg-danger-600 text-white hover:bg-danger-700 focus:ring-danger-500",
            "outline" => "border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500",
            "outline-primary" => "border-2 border-primary-500 text-primary-600 hover:bg-primary-50 focus:ring-primary-500",
            _ => "bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500"
        };

        var widthClass = FullWidth ? "w-full" : "";
        var disabledClass = Disabled ? "opacity-50 cursor-not-allowed" : "";

        return $"{baseClass} {sizeClass} {variantClass} {widthClass} {disabledClass}";
    }

    private string GetIconSizeClass() => Size switch
    {
        "sm" => "w-4 h-4",
        "lg" => "w-6 h-6",
        _ => "w-5 h-5"
    };

    private string GetIconPath() => IconType switch
    {
        "plus" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>",
        "edit" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"/>",
        "delete" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>",
        "view" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"/><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"/>",
        "download" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"/>",
        "upload" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>",
        "check" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"/>",
        "close" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>",
        "refresh" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"/>",
        "search" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/>",
        "filter" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"/>",
        "print" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\"/>",
        "save" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"/>",
        "arrow-right" => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14 5l7 7m0 0l-7 7m7-7H3\"/>",
        _ => "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>"
    };
}
