@* QuickActionButton.razor - Reusable quick action button for dashboards using Radzen *@

@if (IsLink)
{
    <RadzenButton ButtonStyle="@GetButtonStyle()" Variant="@GetVariant()" Size="@GetSize()"
                  Text="@Text" Icon="@GetMaterialIcon()" Style="@GetStyle()"
                  Click="@(() => Navigation.NavigateTo(Link ?? "/"))" />
}
else
{
    <RadzenButton ButtonStyle="@GetButtonStyle()" Variant="@GetVariant()" Size="@GetSize()"
                  Text="@Text" Icon="@GetMaterialIcon()" Style="@GetStyle()"
                  Click="@OnClick" Disabled="@Disabled" IsBusy="@IsLoading" />
}

@code {
    [Inject] private NavigationManager Navigation { get; set; } = default!;

    [Parameter] public string Text { get; set; } = "AcÈ›iune";
    [Parameter] public string IconType { get; set; } = "plus"; // plus, edit, delete, view, download, upload, check, close, calendar, document
    [Parameter] public string Variant { get; set; } = "primary"; // primary, secondary, success, warning, danger, outline, outline-primary
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg
    [Parameter] public bool FullWidth { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public bool IsLink { get; set; }
    [Parameter] public string? Link { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }
    [Parameter] public RenderFragment? IconContent { get; set; }

    private string GetMaterialIcon() => IconType switch
    {
        "plus" => "add",
        "edit" => "edit",
        "delete" => "delete",
        "view" => "visibility",
        "download" => "download",
        "upload" => "upload",
        "check" => "check",
        "close" => "close",
        "refresh" => "refresh",
        "search" => "search",
        "filter" => "filter_list",
        "print" => "print",
        "save" => "save",
        "arrow-right" => "arrow_forward",
        "calendar" => "calendar_month",
        "document" => "description",
        _ => "add"
    };

    private ButtonStyle GetButtonStyle() => Variant switch
    {
        "secondary" => ButtonStyle.Secondary,
        "success" => ButtonStyle.Success,
        "warning" => ButtonStyle.Warning,
        "danger" => ButtonStyle.Danger,
        "outline" => ButtonStyle.Light,
        "outline-primary" => ButtonStyle.Primary,
        _ => ButtonStyle.Primary
    };

    private Radzen.Variant GetVariant() => Variant switch
    {
        "outline" => Radzen.Variant.Outlined,
        "outline-primary" => Radzen.Variant.Outlined,
        _ => Radzen.Variant.Filled
    };

    private ButtonSize GetSize() => Size switch
    {
        "sm" => ButtonSize.Small,
        "lg" => ButtonSize.Large,
        _ => ButtonSize.Medium
    };

    private string GetStyle()
    {
        var style = "";
        if (FullWidth)
        {
            style += "width: 100%;";
        }
        return style;
    }
}
